((t=document.currentScript.dataset)=>{document.addEventListener("DOMContentLoaded",(()=>new function(e=(t=>JSON.parse("{"+t.replace(/\s*([a-zA-Z-]+)\s*:\s*/g,'"$1":').replace(/'/g,'"')+"}")),n=Object.assign({},{appName:"darth-fader",selector:"fade",eventName:"fade",thumb:!1,snap:!1,steps:!1,fix:!1,ignore:!1},e(Object.values(t)[0]||"")),i=(t=>{for(let e=0,n=t.length;e<n;e+=2)t[e]=t[e].split(/(-?\d*\.{0,1}\d+)/),t[e].forEach(((n,i)=>t[e][i]=isNaN(parseFloat(n))?n:Number(n)));return t}),a=((t,e,n)=>{let i=[];return t.lowEnd.forEach(((a,s)=>{if("number"!=typeof a||t.topEnd[s]===a)i[s]=a;else{let d=a+(t.topEnd[s]-a)*((e-t.lowStop)/(t.topStop-t.lowStop));i[s]=n?d.toFixed(n):d}})),i.join("")}),s=(t=>{const e=(parseFloat(t.obj.value)-t.min)/t.dif;let n={};for(let i in t.fades){let s=t.fades[i],d=0;for(;s[1+2*d]<=e&&1!=s[1+2*d];)s.lowStop=s[1+2*d],s.lowEnd=s[2*d],d++;s.topStop=s[1+2*d],s.topEnd=s[2*d],n[i]=a(s,e,t.fix)}for(let e in t.hiddenInputs)t.hiddenInputs[e].value=n[e];t.obj.dispatchEvent(new CustomEvent(t.eventName,{detail:n}))})){document.body.appendChild(document.createElement("style")).innerText=`input[data-${n.selector}]{--thumbH:40px;--thumb-color:rgb(255,255,255);--thumb-border:var(--holder-back);-webkit-appearance:none;display:inline-block;height:var(--thumbH);width:100%;border-radius:calc(var(--thumbH)/2);background-color:var(--main-color);}input[data-${n.selector}]::-webkit-slider-thumb{-webkit-appearance:none;background-color:var(--thumb-color);height:var(--thumbH);width:var(--thumbH);border:calc(0.1*var(--thumbH))solid;border-color:var(--thumb-border);border-radius:calc(var(--thumbH)/2);}input[data-${n.selector}]:focus{outline:none;}@mediascreenand(max-width:500px){input[data-${n.selector}]{--thumbH:100px;}}@mediascreenand(orientation:landscape)and(max-width:760px){input[data-${n.selector}]{--thumbH:30px;}}`,document.querySelectorAll(`[data-${n.selector}]:not(script)            ,[data-${n.selector}-opts]:not(script)`).forEach(((t,a)=>this[a]=new function(){for(let[i,a]of Object.entries(Object.assign({},n,e('"fades":{'+(t.dataset[n.selector]||"")+"}"),e(t.dataset[n.selector+"Opts"]||""),{obj:t,id:t.id,min:t.min||0,max:t.max||100,hiddenInputs:[]})))this[i]=a;this.dif=this.max-this.min,this.ignore&&(this.ignore=JSON.parse("{"+this.ignore.replace(/([a-zA-Z-]+)/g,'"$1":true').replace(/,$/,"")+"}"));for(let e in this.fades)if(this.fades[e]=i(this.fades[e]),!this.ignore[e]){let n=document.createElement("input");n.type="hidden",n.id=n.name=`${t.id}_${e}`,t.appendChild(this.hiddenInputs[e]=n)}if(this.steps&&t.setAttribute("step",this.dif/(("number"==typeof this.steps?this.steps:this.fades[this.steps].length/2)-1)),this.snap&&this.fades[this.snap]){let e=this.fades[this.snap],n=document.createElement("datalist");for(let t=0,i=e.length;t<i;t+=2){let i=document.createElement("option");i.innerHTML=parseInt(this.min,10)+e[t+1]*this.dif,n.appendChild(i)}t.appendChild(n),n.id=`${t.id}_datalist`,t.setAttribute("list",n.id)}this.thumb&&(this.fades[this.thumb]||(this.fades[this.thumb="thumb"]=i(["rgb(200,0,200)",0,"rgb(255,255,255)",.5,"rgb(238,170,0)",1])),t.addEventListener(this.eventName,(e=>{t.style.setProperty("--thumb-color",e.detail[this.thumb])}))),t.addEventListener("input",(t=>s(this))),t.dispatchEvent(new Event("input"))}))}))})();